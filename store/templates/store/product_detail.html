{% extends 'base.html' %}

{% block title %}{{ product.name }} - Maja's Store{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-6">
        {% if product.image %}
            <img src="{{ product.image.url }}" class="img-fluid" alt="{{ product.name }}">
        {% endif %}
    </div>
    <div class="col-md-6">
        <h1>{{ product.name }}</h1>
        <p class="lead">${{ product.price }}</p>
        <p>{{ product.description }}</p>
        <form action="{% url "cart:cart_add" product.id %}" method="post">
            {{ cart_product_form }}
            {% csrf_token %}
            <input type="submit" value="Add to cart" class="btn btn-primary">
        </form>
    </div>
</div>

<hr>

<div class="row">
    <div class="col-md-8">
        <h3>Reviews</h3>
        {% if reviews %}
            {% for review in reviews %}
                <div class="card mb-3">
                    <div class="card-body">
                        <p class="card-text">{{ review.comment }}</p>
                        <p class="card-subtitle text-muted">by {{ review.user.username }} on {{ review.date|date:"F d, Y" }}</p>
                    </div>
                </div>
            {% endfor %}
        {% else %}
            <p>There are no reviews yet.</p>
        {% endif %}
    </div>
    <div class="col-md-4">
        <h3>Write a review</h3>
        {% if user.is_authenticated %}
            <form action="{% url 'store:add_review' product.pk %}" method="post">
                {% csrf_token %}
                {{ review_form.as_p }}
                <button type="submit" class="btn btn-success">Submit Review</button>
            </form>
        {% else %}
            <p>Please <a href="{% url 'accounts:login' %}?next={{ request.path }}">log in</a> to write a review.</p>
        {% endif %}
    </div>
</div>
{% endblock %}

